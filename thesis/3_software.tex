\section{Softwarerecherche}
Im folgenden Kapitel werden verschiedene Tools und Frameworks zur Realisierung von automatisierten Tests untersucht. Einen Überblick über zur Verfügung stehende Tools bieten dabei \textcite{unittest-overview} und Weitere.

\subsection{Karma}
\label{sec:Karma}
Karma ist ein Test-Runner für die Ausführung von JavaScript-Tests. Er wurde vom AngularJS-Team ins Leben gerufen und wird auf GitHub von einer Open-Source-Gemeinschaft weiterentwickelt.\cite{karma-index} Karma liegt als Paket \texttt{karma} im npm-Repository\cite{karma-faq}.

Karma ermöglicht die Nutzung diverser Testframeworks, wie Jasmine (s. Abschnitt \ref{sec:Jasmine}), Mocha (s. Abschnitt \ref{sec:Mocha}) oder QUnit (s. Abschnitt \ref{sec:QUnit}). Auch Continuous Integration Server wie Jenkins oder Travis werden unterstützt.\cite{karma-faq}

Grundlegend basiert Karma auf einem Client-Server-Prinzip, wobei Karma einen Webserver startet, welcher alle verbundenen Browser fernsteuert und in diesen die Tests ausführt. Ein Browser kann hierbei entweder manuell, also durch Aufruf der vom Karma-Server bereitgestellten URL, oder automatisiert, also indem der Browser durch Karma gestartet wird (vgl. Listing \ref{lst:karma-conf-js}), verbunden werden. In jeder Testumgebung wird der Quelltext mittels IFrame eingebunden, der Test ausgeführt und danach die Ergebnisse an den Server gesendet. Dort werden die Ergebnisse aufgearbeitet präsentiert oder automatisiert von übergeordneten Buildprozessen verarbeitet. Das verwendete Prinzip stammt aus einer Masterthesis \cite{karma-masterThesis}; tieferes Verständnis ist jedoch für die reine Nutzung von Karma nicht erforderlich.\cite{karma-howItWorks}

Für die Konfiguration wird eine JavaScript-Datei, die \texttt{karma.conf.js}, genutzt. Ein Beispiel findet sich in Listing \ref{lst:karma-conf-js}. Mit dieser beispielhaften Konfiguration wird für die Testausführung das Framework Jasmine (s. Abschnitt \ref{sec:Jasmine}) genutzt. Der Parameter \texttt{files} gibt an, welche Dateien von Karma ausgeliefert und beobachtet werden, und somit bei Änderung welcher Dateien die Tests automatisch erneut ausgeführt werden. Außerdem ist konfiguriert, dass bei Testdurchführung automatisch Firefox gestartet werden und in diesem die Tests ausgeführt werden soll.\cite{karma-configurationFile, karma-files}

\begin{figure}[H]
	\lstinputlisting[caption={Beispiel einer \texttt{karma.conf.js} (adaptiert nach \cite{karma-configurationFile, karma-files})}, label=lst:karma-conf-js]{lst/karma.conf.js}
\end{figure}

Die Funktionalität von Karma lässt sich mit Plugins erweitern. Sie werden für die Einbindung von Testframeworks, ein verändertes Ausgabeformat der Testergebnisse, Präprozessoren (z.\,B. für die Auslieferung von in JavaScript eingebettetem HTML oder die Ermittlung der Code Coverage)\cite{karma-preprocessors} oder die Einbindung von Browsern wie Firefox, Chrome oder PhantomJS (s. Abschnitt \ref{sec:PhantomJS}) benötigt. Jedes Plugin ist ein npm-Paket, daher werden Plugins über npm installiert. Karma bindet alle installierten Pakete mit dem Namen \texttt{karma-*} automatisch ein.\cite{karma-plugins} Im npm-Repository liegen über 1300 Karma-Plugins.\cite{karma-npm}

\subsection{Jasmine}
\label{sec:Jasmine}
Jasmine ist ein Behavior Driven Development Framework zum Test von JavaScript\cite{jasmine-introduction}. Es liegt unter \texttt{jasmine} im npm-Repository\cite{jasmine-getting-started}. Jasmine bietet eine saubere und einfache Syntax zur Beschreibung von Testfällen. Die Tests bestehen aus drei Ebenen: Testsuites, Spezifizierungen (\glqq Specs\grqq) und Erwartungen, also den eigentlichen Testassertions\cite{jasmine-introduction}. Ein beispielhafter Test findet sich in Listing \ref{lst:jasmine-1}.

Eine Testsuite beginnt auf oberster Ebene mit dem Aufruf der globalen JavaScript-Funktion \texttt{describe(string, function)}. Der String ist hierbei der Name der Testsuite, üblicherweise wird hier das Testsubjekt benannt. Die Funktion implementiert die Testsuite und besteht aus Specs.\cite{jasmine-introduction}

Ein Spec wird durch Aufruf der globalen Funktion \texttt{it(string, function)} angelegt. Der String enthält eine Beschreibung des Testfalls; nach dem BDD-Modell also eine Beschreibung des erwarteten Verhaltens. Die Funktion dient zum Überprüfen dieses Verhaltens und enthält Assertions, welche entweder \texttt{true} oder \texttt{false} ergeben. Liefern alle Assertions \texttt{true} so gilt die Spec als bestanden, ansonsten als durchgefallen.\cite{jasmine-introduction}

Eine Assertion besteht in Jasmine aus der Funktion \texttt{expect(object)}, welcher der tatsächliche Wert übergeben wird. Diese wird mit einer Matcher-Funktion verkettet, welche den erwarteten Wert übergeben bekommt und die beiden Werte vergleicht und auswertet. Es wird eine Vielzahl an vorgefertigten Matchern mitgeliefert: \texttt{toEqual}, \texttt{toContain}, \texttt{toBeTruthy}, und Weitere\cite{jasmine-introduction, jasmine-cheatsheet}.

\begin{figure}[H]
	\lstinputlisting[caption={Beispiel einer Jasmine-Testsuite (adaptiert nach \cite{jasmine-introduction})}, label=lst:jasmine-1]{lst/jasmine-1.js}
\end{figure}

Specs können als \textit{pending} deklariert werden. Sie werden dann nicht ausgeführt, aber im Ergebnis angezeigt. Hierfür kann beim Aufruf der \texttt{it}-Funktion die Übergabe einer Funktion weggelassen werden, stattdessen die \texttt{xit}-Funktion aufgerufen werden oder im Funktionskörper die \texttt{pending}-Funktion genutzt werden.\cite{jasmine-introduction}

\subsection{Protractor}
\label{sec:Protractor}

\subsection{Mocha}
\label{sec:Mocha}

\subsection{QUnit}
\label{sec:QUnit}

\subsection{PhantomJS}
\label{sec:PhantomJS}